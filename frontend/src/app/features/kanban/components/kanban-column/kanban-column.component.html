<div class="kanban-column bg-gray-100 p-4 rounded-lg flex flex-col h-full max-h-screen">
    <div class="flex justify-between items-center mb-4">
        <h3 class="font-bold text-lg text-gray-700">{{ title }}</h3>
        <span class="bg-gray-300 text-gray-700 px-2 py-1 rounded text-sm">{{ cards.length }}</span>
    </div>

    <div class="relative flex-1 min-h-[100px]">
        <div cdkDropList [id]="listId" [cdkDropListData]="cards" (cdkDropListDropped)="onDrop($event)"
            class="column-scroll h-full min-h-[100px] pr-1">
            @for (card of cards; track card._id) {
            <div cdkDrag [cdkDragData]="card" class="mb-3" [cdkDragDisabled]="!!editingUsers[card._id]">
                <app-kanban-card [card]="card" [editingUser]="editingUsers[card._id]"
                    [labelsExpandedGlobal]="labelsExpandedGlobal"
                    (toggleLabelsExpandedGlobal)="toggleLabelsExpandedGlobal.emit()" (edit)="onEditCard($event)"
                    (delete)="onDeleteCard($event)" (startEditing)="startEditing.emit($event)"
                    (stopEditing)="stopEditing.emit($event)">
                </app-kanban-card>
                <div *cdkDragPlaceholder
                    class="bg-gray-200 border-2 border-dashed border-gray-400 min-h-[80px] rounded mb-3"></div>
            </div>
            }
        </div>

        <div class="column-scroll-hint pointer-events-none absolute bottom-0 left-0 right-0 h-8 rounded-b-lg"></div>
    </div>

    <div class="mt-4">
        <p-button label="Agregar Tarea" styleClass="p-button-text w-full text-left justify-start" severity="success"
            icon="pi pi-plus" (onClick)="addCard.emit()"></p-button>
    </div>
</div>
